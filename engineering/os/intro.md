# OS

Operating System の略。ユーザーが PC を動かしやすくするための基盤となるソフトウェア。
ハードウェアの個々の特性を吸収して、アプリケーションなどのソフトウェアを使える環境を整えたりする。

## 種類

- Windows
  - Microsoft 社開発。
  - 90%以上のシャア
- Mac OS
  - Apple 社開発の PC 用の OS。
  - グラフィカルで UI が優れている
  - Mac OS X から根幹は UNIX ベースとなっている。
- UNIX
  - ベル研究室が発明。ほぼ最古に近い OS。
  - ライセンス契約
- LINUX
  - UNIX を参考して作られた。
  - オープンソース
- iOS
  - Apple 社開発の PC 以外の Apple 機器用 OS。
  - PC 以外の Apple 機器用
- Android
  - Linux カーネルとその他オープンソースソフトウェアを基に Google 社が開発した OS。
  - iOS とは対照的に他の企業にも公開されている。

## 構成要素

OS は大きく「カーネル」と「それ以外」の部分で構成され、それぞれの内部にも構成要素が存在する

- カーネル
  - OS の中核となるソフトウェア
  - ソフトウェアとハードウェアの仲立ちをしており、カーネルを通じて CPU やメモリやハードディスクを操作する
  - 主に以下のような役割を担う
    - プロセス管理
    - メモリ管理
    - デバイス管理
      - ファイルシステム
      - ネットワーク
    - システムコール
- その他
  - シェル
    - ユーザーからの指令をカーネルに伝える
    - ソフトウェアからの司令は直接カーネルに伝えられる
  - デスクトップ環境(GUI)
    - デスクトップを提供してくれるソフトウェア
  - デバイスドライバ
    - ハードウェアを制御するためのソフトウェア

![OS構成](https://www.hitachi.co.jp/products/it/server/ha8500/column/images/column04_001.jpg)

## 周辺要素

- ブートローダー
  - PC 起動時に呼び出せる(boot される)OS などを動かす仕事をするプログラム
  - -> OS を叩き起こすめざまし的存在
  - 起動時のフロー
    - 電源投入 -> BIOS 投入 -> ブートローダー起動 -> OS 起動
    - (細く)BIOS(Basic Input Output System) ... ハードウェアの制御をするプログラム。マザーボードにくっついてる
- アプリケーション

  - OS 単体だと基本的な機能しか提供しないので、その他のユーザーが使いやすいやすいように様々なソフトウェアがセットになっている
    - ex: 標準アプリケーション全般(ファイル管理、ブラウザ、各種設定、メール...)

- デーモン
  - メモリ上で待機している常駐プログラムの UNIX 系 OS における呼び名
  - 主にバックグランドで動作するプロセス
  - 典型的なデーモンは語尾に「d」がつく(ex: sshd ... SSH 接続要求を受け付けるデーモン)

## カーネルの仕事

### プロセス管理

**プロセスとは**

- プログラムの動作中のインスタンス。プログラムのコードおよび全ての変数やその他状態を含む
- PC は命令の受動的集合体であり、プロセスはその命令を実行する。

**プロセスを構成するリソース**

- プログラムを対応する実行命令コードのイメージ
- 以下を格納するメモリ
  - 実行コード
  - プロセス固有のデータ
  - コールスタック ... プログラムで実行中のサブルーチン(一連の処理の中で意味的にひとまとまりにできる処理の塊、メイン関数内部で呼ばれるサブ関数的なもの)に関する情報を持つスタック
  - ヒープ領域 ... 動的に確保可能なメモリの領域
- プロセスに割り当てられたリソースの記述子
  - ex: ファイル記述子(UNIX 系)、ファイルハンドル(windows)
- セキュリティ属性 ... プロセスの所有者やプロセスに関わるパーミッションなど。
- プロセッサ状態(コンテキスト) ... 割り込みが入った時などにプログラムの実行中の内容を保存する。

**プロセス管理**

- プロセスの生成・実行・消滅を管理すること。

<管理対象>
基本的にはプロセスだが、プロセス内部のスレッドを直接制御する場合もあり、その場合のスレッドをライトウェイトプロセスと呼ぶこともある。
また、プロセスをグループ化してリソースを割り当てる昨日を持つ場合はプロセスグループも管理対象となる

## メモリ管理

PC のメモリの管理をするもの。
主に、プログラムの要求に応じてメモリの一部を割り当てる方法と、そのメモリが不要になった時に再利用するために解放する方法を提供する
